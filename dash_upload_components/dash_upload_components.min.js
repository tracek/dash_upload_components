window.dash_upload_components=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=void 0;var n,a=r(1),i=(n=a)&&n.__esModule?n:{default:n};t.Upload=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),i=l(a),s=l(r(3)),o=l(r(6));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={progressBar:0,messageStatus:"",fileList:{files:[]},isPaused:!1,isUploading:!1,isHovered:!1,isComplete:!1},r.toggleHovered=r.toggleHovered.bind(r),r.cancelUpload=r.cancelUpload.bind(r),r.pauseUpload=r.pauseUpload.bind(r),r.startUpload=r.startUpload.bind(r),r.resumable=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),n(t,[{key:"componentDidMount",value:function(){var e=this,t=new o.default({target:this.props.service,query:{},fileType:this.props.filetypes,maxFiles:this.props.maxFiles,maxFileSize:this.props.maxFileSize,fileTypeErrorCallback:function(){e.setState({messageStatus:"Invalid file type!"})},testMethod:"post",testChunks:!1,headers:{},chunkSize:this.props.chunkSize,simultaneousUploads:this.props.simultaneousUploads,forceChunkSize:!1});t.assignBrowse(this.uploader),!1===this.props.disableDragAndDrop&&t.assignDrop(this.dropZone),t.on("fileAdded",function(r){e.setState({messageStatus:e.props.fileAddedMessage||" Starting upload! of "+r.fileName,isComplete:!1}),"function"==typeof e.props.onFileAdded?e.props.onFileAdded(r,e.resumable):t.upload()}),t.on("fileSuccess",function(t,r){if(e.props.fileNameServer){var n=JSON.parse(r);t.fileName=n[e.props.fileNameServer]}else t.fileName=r;var a=e.state.fileList.files;a.push(t);var i=e.props.fileNames;i.push(t.fileName),e.props.setProps&&e.props.setProps({fileNames:i}),e.setState({fileList:{files:a},isComplete:!0,messageStatus:e.props.completedMessage+t.fileName||r},function(){"function"==typeof e.props.onFileSuccess&&e.props.onFileSuccess(t,r)})}),t.on("progress",function(){e.setState({isUploading:t.isUploading()}),100*t.progress()<100?e.setState({messageStatus:parseInt(100*t.progress(),10)+"%",progressBar:100*t.progress()}):setTimeout(function(){e.setState({progressBar:0})},1e3)}),t.on("fileError",function(t,r){e.props.onUploadErrorCallback(t,r)}),this.resumable=t}},{key:"cancelUpload",value:function(){this.resumable.cancel(),this.setState({fileList:{files:[]}})}},{key:"pauseUpload",value:function(){this.state.isPaused?(this.resumable.upload(),this.setState({isPaused:!1,isUploading:!0})):(this.resumable.pause(),this.setState({isPaused:!0,isUploading:!0}))}},{key:"startUpload",value:function(){this.setState({isPaused:!1})}},{key:"toggleHovered",value:function(){this.setState({isHovered:!this.state.isHovered})}},{key:"render",value:function(){var e=this,t=null;this.props.textLabel&&(t=this.props.textLabel);var r=null;this.props.startButton&&(r="string"==typeof this.props.startButton||"boolean"==typeof this.props.startButton?i.default.createElement("label",null,i.default.createElement("button",{disabled:this.state.isUploading,className:"resumable-btn-start",onClick:this.startUpload},this.props.startButton&&"upload")):this.props.startButton);var n=null;this.props.cancelButton&&(n="string"==typeof this.props.cancelButton||"boolean"==typeof this.props.cancelButton?i.default.createElement("label",null,i.default.createElement("button",{disabled:!this.state.isUploading,className:"resumable-btn-cancel",onClick:this.cancelUpload},this.props.cancelButton&&"cancel")):this.props.cancelButton);var a=null;this.props.pauseButton&&(a="string"==typeof this.props.pauseButton||"boolean"==typeof this.props.pauseButton?i.default.createElement("label",null,i.default.createElement("button",{disabled:!this.state.isUploading,className:"resumable-btn-pause",onClick:this.pauseUpload},this.props.pauseButton&&(this.state.isPaused?"resume":"pause"))):this.props.pauseButton);return i.default.createElement("div",{id:this.props.id,className:e.props.disabledInput?e.props.disableClass:e.state.isHovered?e.props.hoveredClass:e.state.isUploading?e.props.uploadingClass:e.state.isComplete?e.props.completeClass:e.state.isPaused?e.props.completeClass:e.props.className,ref:function(t){return e.dropZone=t}},i.default.createElement("label",{style:e.state.isComplete?e.props.completeStyle:e.state.isHovered||e.state.isUploading?e.props.activeStyle:e.props.defaultStyle,onMouseEnter:this.toggleHovered,onMouseLeave:this.toggleHovered},""==this.state.messageStatus?t:this.state.messageStatus,i.default.createElement("input",{ref:function(t){return e.uploader=t},type:"file",className:"btn",name:this.props.id+"-upload",accept:this.props.fileAccept||"*",disabled:this.props.disableInput||!1,style:{opacity:"0",width:"0.1px%",height:"0.1px%",position:"absolute",overflow:"hidden","z-index":"-1"}})),i.default.createElement("div",{className:"progress",style:{display:0===this.state.progressBar?"none":"block"}},i.default.createElement("div",{className:"progress-bar",style:{width:this.state.progressBar+"%",height:"100%"}})),null,r,a,n)}}]),t}();t.default=u,u.propTypes={maxFiles:s.default.number,maxFileSize:s.default.number,chunkSize:s.default.number,simultaneousUploads:s.default.number,service:s.default.string,className:s.default.string,hoveredClass:s.default.string,disabledClass:s.default.string,pausedClass:s.default.string,completeClass:s.default.string,uploadingClass:s.default.string,defaultStyle:s.default.object,activeStyle:s.default.object,completeStyle:s.default.object,textLabel:s.default.string,completedMessage:s.default.string,fileNames:s.default.arrayOf(s.default.string),filetypes:s.default.arrayOf(s.default.string),startButton:s.default.bool,pauseButton:s.default.bool,cancelButton:s.default.bool,disableDragAndDrop:s.default.bool,setProps:s.default.func,id:s.default.string},u.defaultProps={maxFiles:1,maxFileSize:10485760,chunkSize:1048576,simultaneuosUploads:1,service:"/upload",className:"resumable-default",hoveredClass:"resumable-hovered",completeClass:"resumable-complete",disabledClass:"resumable-disabled",pausedClass:"resumable-paused",uploadingClass:"resumable-uploading",defaultStyle:{},activeStyle:{},completeStyle:{},textLabel:"Click Here to Select a File",completedMessage:"Complete! ",fileNames:[],filetypes:void 0,startButton:!0,pauseButton:!0,cancelButton:!0,disableDragAndDrop:!1,id:"default-uploader-id"}},function(e,t){e.exports=window.React},function(e,t,r){e.exports=r(4)()},function(e,t,r){"use strict";var n=r(5);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,i,s){if(s!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){!function(){"use strict";var t=function(e){if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var r=this;r.files=[],r.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",chunkNumberParameterName:"resumableChunkNumber",chunkSizeParameterName:"resumableChunkSize",currentChunkSizeParameterName:"resumableCurrentChunkSize",totalSizeParameterName:"resumableTotalSize",typeParameterName:"resumableType",identifierParameterName:"resumableIdentifier",fileNameParameterName:"resumableFilename",relativePathParameterName:"resumableRelativePath",totalChunksParameterName:"resumableTotalChunks",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",testTarget:null,parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:100,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,clearInput:!0,chunkFormat:"blob",setChunkTypeFromFile:!1,maxFilesErrorCallback:function(e,t){var n=r.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+n.formatSize(r.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+n.formatSize(r.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+r.getOpt("fileType")+".")}},r.opts=e||{},r.getOpt=function(e){var r=this;if(e instanceof Array){var a={};return n.each(e,function(e){a[e]=r.getOpt(e)}),a}if(r instanceof f){if(void 0!==r.opts[e])return r.opts[e];r=r.fileObj}if(r instanceof p){if(void 0!==r.opts[e])return r.opts[e];r=r.resumableObj}if(r instanceof t)return void 0!==r.opts[e]?r.opts[e]:r.defaults[e]},r.events=[],r.on=function(e,t){r.events.push(e.toLowerCase(),t)},r.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=e[0].toLowerCase();for(t=0;t<=r.events.length;t+=2)r.events[t]==n&&r.events[t+1].apply(r,e.slice(1)),"catchall"==r.events[t]&&r.events[t+1].apply(null,e);"fileerror"==n&&r.fire("error",e[2],e[1]),"fileprogress"==n&&r.fire("progress")};var n={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if(void 0!==e.length){for(var r=0;r<e.length;r++)if(!1===t(e[r]))return}else for(r in e)if(!1===t(r,e[r]))return},generateUniqueIdentifier:function(e,t){var n=r.getOpt("generateUniqueIdentifier");if("function"==typeof n)return n(e,t);var a=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+a.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var r=!1;return n.each(e,function(e){return e!=t||(r=!0,!1)}),r},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e,t){var n=r.getOpt("target");if("test"===e&&r.getOpt("testTarget")&&(n="/"===r.getOpt("testTarget")?r.getOpt("target"):r.getOpt("testTarget")),"function"==typeof n)return n(t);var a=n.indexOf("?")<0?"?":"&";return n+a+t.join("&")}},a=function(e){n.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?l(e.dataTransfer.items,e):e.dataTransfer&&e.dataTransfer.files&&l(e.dataTransfer.files,e)},i=function(e){e.preventDefault()};function s(e,t,r,n){var a;return e.isFile?e.file(function(e){e.relativePath=t+e.name,r.push(e),n()}):(e.isDirectory?a=e:e instanceof File&&r.push(e),"function"==typeof e.webkitGetAsEntry&&(a=e.webkitGetAsEntry()),a&&a.isDirectory?function(e,t,r,n){e.createReader().readEntries(function(e){if(!e.length)return n();o(e.map(function(e){return s.bind(null,e,t,r)}),n)})}(a,t+a.name+"/",r,n):("function"==typeof e.getAsFile&&(e=e.getAsFile())instanceof File&&(e.relativePath=t+e.name,r.push(e)),void n()))}function o(e,t){if(!e||0===e.length)return t();e[0](function(){o(e.slice(1),t)})}function l(e,t){if(e.length){r.fire("beforeAdd");var n=[];o(Array.prototype.map.call(e,function(e){return s.bind(null,e,"",n)}),function(){n.length&&u(n,t)})}}var u=function(e,t){var a=0,i=r.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(void 0!==i.maxFiles&&i.maxFiles<e.length+r.files.length){if(1!==i.maxFiles||1!==r.files.length||1!==e.length)return i.maxFilesErrorCallback(e,a++),!1;r.removeFile(r.files[0])}var s=[],o=[],l=e.length,u=function(){if(!--l){if(!s.length&&!o.length)return;window.setTimeout(function(){r.fire("filesAdded",s,o)},0)}};n.each(e,function(e){var l=e.name;if(i.fileType.length>0){var f=!1;for(var c in i.fileType){var d="."+i.fileType[c];if(-1!==l.toLowerCase().indexOf(d.toLowerCase(),l.length-d.length)){f=!0;break}}if(!f)return i.fileTypeErrorCallback(e,a++),!1}if(void 0!==i.minFileSize&&e.size<i.minFileSize)return i.minFileSizeErrorCallback(e,a++),!1;if(void 0!==i.maxFileSize&&e.size>i.maxFileSize)return i.maxFileSizeErrorCallback(e,a++),!1;function m(n){r.getFromUniqueIdentifier(n)?o.push(e):function(){e.uniqueIdentifier=n;var a=new p(r,e,n);r.files.push(a),s.push(a),a.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){r.fire("fileAdded",a,t)},0)}(),u()}var h=n.generateUniqueIdentifier(e,t);h&&"function"==typeof h.then?h.then(function(e){m(e)},function(){u()}):m(h)})};function p(e,t,r){var a=this;a.opts={},a.getOpt=e.getOpt,a._prevProgress=0,a.resumableObj=e,a.file=t,a.fileName=t.fileName||t.name,a.size=t.size,a.relativePath=t.relativePath||t.webkitRelativePath||a.fileName,a.uniqueIdentifier=r,a._pause=!1,a.container="";var i=void 0!==r,s=function(e,t){switch(e){case"progress":a.resumableObj.fire("fileProgress",a,t);break;case"error":a.abort(),i=!0,a.chunks=[],a.resumableObj.fire("fileError",a,t);break;case"success":if(i)return;a.resumableObj.fire("fileProgress",a),a.isComplete()&&a.resumableObj.fire("fileSuccess",a,t);break;case"retry":a.resumableObj.fire("fileRetry",a)}};return a.chunks=[],a.abort=function(){var e=0;n.each(a.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&a.resumableObj.fire("fileProgress",a)},a.cancel=function(){var e=a.chunks;a.chunks=[],n.each(e,function(e){"uploading"==e.status()&&(e.abort(),a.resumableObj.uploadNextChunk())}),a.resumableObj.removeFile(a),a.resumableObj.fire("fileProgress",a)},a.retry=function(){a.bootstrap();var e=!1;a.resumableObj.on("chunkingComplete",function(){e||a.resumableObj.upload(),e=!0})},a.bootstrap=function(){a.abort(),i=!1,a.chunks=[],a._prevProgress=0;for(var e=a.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(a.file.size/a.getOpt("chunkSize")),1),r=0;r<t;r++)!function(e){window.setTimeout(function(){a.chunks.push(new f(a.resumableObj,a,e,s)),a.resumableObj.fire("chunkingProgress",a,e/t)},0)}(r);window.setTimeout(function(){a.resumableObj.fire("chunkingComplete",a)},0)},a.progress=function(){if(i)return 1;var e=0,t=!1;return n.each(a.chunks,function(r){"error"==r.status()&&(t=!0),e+=r.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(a._prevProgress,e),a._prevProgress=e,e},a.isUploading=function(){var e=!1;return n.each(a.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},a.isComplete=function(){var e=!1;return n.each(a.chunks,function(t){var r=t.status();if("pending"==r||"uploading"==r||1===t.preprocessState)return e=!0,!1}),!e},a.pause=function(e){a._pause=void 0===e?!a._pause:e},a.isPaused=function(){return a._pause},a.resumableObj.fire("chunkingStart",a),a.bootstrap(),this}function f(e,t,r,a){var i=this;i.opts={},i.getOpt=e.getOpt,i.resumableObj=e,i.fileObj=t,i.fileObjSize=t.size,i.fileObjType=t.file.type,i.offset=r,i.callback=a,i.lastProgressCallback=new Date,i.tested=!1,i.retries=0,i.pendingRetry=!1,i.preprocessState=0;var s=i.getOpt("chunkSize");return i.loaded=0,i.startByte=i.offset*s,i.endByte=Math.min(i.fileObjSize,(i.offset+1)*s),i.fileObjSize-i.endByte<s&&!i.getOpt("forceChunkSize")&&(i.endByte=i.fileObjSize),i.xhr=null,i.test=function(){i.xhr=new XMLHttpRequest;var e=function(e){i.tested=!0;var t=i.status();"success"==t?(i.callback(t,i.message()),i.resumableObj.uploadNextChunk()):i.send()};i.xhr.addEventListener("load",e,!1),i.xhr.addEventListener("error",e,!1),i.xhr.addEventListener("timeout",e,!1);var t=[],r=i.getOpt("parameterNamespace"),a=i.getOpt("query");"function"==typeof a&&(a=a(i.fileObj,i)),n.each(a,function(e,n){t.push([encodeURIComponent(r+e),encodeURIComponent(n)].join("="))}),t=t.concat([["chunkNumberParameterName",i.offset+1],["chunkSizeParameterName",i.getOpt("chunkSize")],["currentChunkSizeParameterName",i.endByte-i.startByte],["totalSizeParameterName",i.fileObjSize],["typeParameterName",i.fileObjType],["identifierParameterName",i.fileObj.uniqueIdentifier],["fileNameParameterName",i.fileObj.fileName],["relativePathParameterName",i.fileObj.relativePath],["totalChunksParameterName",i.fileObj.chunks.length]].filter(function(e){return i.getOpt(e[0])}).map(function(e){return[r+i.getOpt(e[0]),encodeURIComponent(e[1])].join("=")})),i.xhr.open(i.getOpt("testMethod"),n.getTarget("test",t)),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var s=i.getOpt("headers");"function"==typeof s&&(s=s(i.fileObj,i)),n.each(s,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(null)},i.preprocessFinished=function(){i.preprocessState=2,i.send()},i.send=function(){var e=i.getOpt("preprocess");if("function"==typeof e)switch(i.preprocessState){case 0:return i.preprocessState=1,void e(i);case 1:return}if(!i.getOpt("testChunks")||i.tested){i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",function(e){new Date-i.lastProgressCallback>1e3*i.getOpt("throttleProgressCallbacks")&&(i.callback("progress"),i.lastProgressCallback=new Date),i.loaded=e.loaded||0},!1),i.loaded=0,i.pendingRetry=!1,i.callback("progress");var t=function(e){var t=i.status();if("success"==t||"error"==t)i.callback(t,i.message()),i.resumableObj.uploadNextChunk();else{i.callback("retry",i.message()),i.abort(),i.retries++;var r=i.getOpt("chunkRetryInterval");void 0!==r?(i.pendingRetry=!0,setTimeout(i.send,r)):i.send()}};i.xhr.addEventListener("load",t,!1),i.xhr.addEventListener("error",t,!1),i.xhr.addEventListener("timeout",t,!1);var r=[["chunkNumberParameterName",i.offset+1],["chunkSizeParameterName",i.getOpt("chunkSize")],["currentChunkSizeParameterName",i.endByte-i.startByte],["totalSizeParameterName",i.fileObjSize],["typeParameterName",i.fileObjType],["identifierParameterName",i.fileObj.uniqueIdentifier],["fileNameParameterName",i.fileObj.fileName],["relativePathParameterName",i.fileObj.relativePath],["totalChunksParameterName",i.fileObj.chunks.length]].filter(function(e){return i.getOpt(e[0])}).reduce(function(e,t){return e[i.getOpt(t[0])]=t[1],e},{}),a=i.getOpt("query");"function"==typeof a&&(a=a(i.fileObj,i)),n.each(a,function(e,t){r[e]=t});var s=i.fileObj.file.slice?"slice":i.fileObj.file.mozSlice?"mozSlice":i.fileObj.file.webkitSlice?"webkitSlice":"slice",o=i.fileObj.file[s](i.startByte,i.endByte,i.getOpt("setChunkTypeFromFile")?i.fileObj.file.type:""),l=null,u=[],p=i.getOpt("parameterNamespace");if("octet"===i.getOpt("method"))l=o,n.each(r,function(e,t){u.push([encodeURIComponent(p+e),encodeURIComponent(t)].join("="))});else if(l=new FormData,n.each(r,function(e,t){l.append(p+e,t),u.push([encodeURIComponent(p+e),encodeURIComponent(t)].join("="))}),"blob"==i.getOpt("chunkFormat"))l.append(p+i.getOpt("fileParameterName"),o,i.fileObj.fileName);else if("base64"==i.getOpt("chunkFormat")){var f=new FileReader;f.onload=function(e){l.append(p+i.getOpt("fileParameterName"),f.result),i.xhr.send(l)},f.readAsDataURL(o)}var c=n.getTarget("upload",u),d=i.getOpt("uploadMethod");i.xhr.open(d,c),"octet"===i.getOpt("method")&&i.xhr.setRequestHeader("Content-Type","application/octet-stream"),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var m=i.getOpt("headers");"function"==typeof m&&(m=m(i.fileObj,i)),n.each(m,function(e,t){i.xhr.setRequestHeader(e,t)}),"blob"==i.getOpt("chunkFormat")&&i.xhr.send(l)}else i.test()},i.abort=function(){i.xhr&&i.xhr.abort(),i.xhr=null},i.status=function(){return i.pendingRetry?"uploading":i.xhr?i.xhr.readyState<4?"uploading":200==i.xhr.status||201==i.xhr.status?"success":n.contains(i.getOpt("permanentErrors"),i.xhr.status)||i.retries>=i.getOpt("maxChunkRetries")?"error":(i.abort(),"pending"):"pending"},i.message=function(){return i.xhr?i.xhr.responseText:""},i.progress=function(e){void 0===e&&(e=!1);var t=e?(i.endByte-i.startByte)/i.fileObjSize:1;if(i.pendingRetry)return 0;switch(i.xhr&&i.xhr.status||(t*=.95),i.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return i.loaded/(i.endByte-i.startByte)*t}},this}return r.uploadNextChunk=function(){var e=!1;if(r.getOpt("prioritizeFirstAndLastChunk")&&(n.each(r.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(n.each(r.files,function(t){if(!1===t.isPaused()&&n.each(t.chunks,function(t){if("pending"==t.status()&&0===t.preprocessState)return t.send(),e=!0,!1}),e)return!1}),e)return!0;var t=!1;return n.each(r.files,function(e){if(!e.isComplete())return t=!0,!1}),t||r.fire("complete"),!1},r.assignBrowse=function(e,t){void 0===e.length&&(e=[e]),n.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:((n=document.createElement("input")).setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var a=r.getOpt("maxFiles");void 0===a||1!=a?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory");var i=r.getOpt("fileType");void 0!==i&&i.length>=1?n.setAttribute("accept",i.map(function(e){return"."+e}).join(",")):n.removeAttribute("accept"),n.addEventListener("change",function(e){u(e.target.files,e),r.getOpt("clearInput")&&(e.target.value="")},!1)})},r.assignDrop=function(e){void 0===e.length&&(e=[e]),n.each(e,function(e){e.addEventListener("dragover",i,!1),e.addEventListener("dragenter",i,!1),e.addEventListener("drop",a,!1)})},r.unAssignDrop=function(e){void 0===e.length&&(e=[e]),n.each(e,function(e){e.removeEventListener("dragover",i),e.removeEventListener("dragenter",i),e.removeEventListener("drop",a)})},r.isUploading=function(){var e=!1;return n.each(r.files,function(t){if(t.isUploading())return e=!0,!1}),e},r.upload=function(){if(!r.isUploading()){r.fire("uploadStart");for(var e=1;e<=r.getOpt("simultaneousUploads");e++)r.uploadNextChunk()}},r.pause=function(){n.each(r.files,function(e){e.abort()}),r.fire("pause")},r.cancel=function(){r.fire("beforeCancel");for(var e=r.files.length-1;e>=0;e--)r.files[e].cancel();r.fire("cancel")},r.progress=function(){var e=0,t=0;return n.each(r.files,function(r){e+=r.progress()*r.size,t+=r.size}),t>0?e/t:0},r.addFile=function(e,t){u([e],t)},r.addFiles=function(e,t){u(e,t)},r.removeFile=function(e){for(var t=r.files.length-1;t>=0;t--)r.files[t]===e&&r.files.splice(t,1)},r.getFromUniqueIdentifier=function(e){var t=!1;return n.each(r.files,function(r){r.uniqueIdentifier==e&&(t=r)}),t},r.getSize=function(){var e=0;return n.each(r.files,function(t){e+=t.size}),e},r.handleDropEvent=function(e){a(e)},r.handleChangeEvent=function(e){u(e.target.files,e),e.target.value=""},r.updateQuery=function(e){r.opts.query=e},this};e.exports=t}()}]);